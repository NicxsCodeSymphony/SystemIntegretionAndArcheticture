<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Connect</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="css/page.css">
</head>
<body>
   
    <div class="page-container">
        <div class="page-header">
            <div class="logo"><h3>Campus <span>Connect</span></h3></div>
            <div class="menu">
                <ul>
                    <li><a href="userPage.html">Home</a></li>
                    <li><a href="profile.html">Profile</a></li>
                    <li><a href="friends.html">Find Friends</a></li>
                    <li><button id="logout">Logout</button></li>
                </ul>
            </div>
            <div class="name"><h3 id="name"></h3></div>
        </div>

        <div class="content">
            <div class="friend-section">
            </div>
            
            <div class="feeds">
                <div class="post">
                    <div class="post-heading"><img src="" alt=""> <h4>What's on your mind, <span id="anotherName"></span>?</h4></div>
                    <hr>
                    <div class="post-footer"><i class="fa-regular fa-image"></i><p>Photo</p></div>
                </div>

                <div class="feeds-content">
                    <div class="poster-image">
                        <img class="avatar" src="assets/nico.jpg" alt="">
                        <div class="poster-info">
                            <p class="username">@nicxs_assassin</p>
                            <p class="poster-name">John Nico Edisan <span class="">* 1hr ago</span></p>
                        </div>
                    </div>
                    <div class="caption"><p>me cheat? nah, you got it wrong, im the type of person that will watch videos while i wait for you to reply and will check every 2 minutes to see if you have sent me a message</p></div>
                    <div class="post-image"><img src="assets/sample.png" alt=""></div>
                    <div class="interaction"><i class="fa-regular fa-heart"></i><i class="fa-regular fa-comment"></i></div>
                    <hr>
                    <div class="comment">
                        <img class="avatar"  src="assets/nico.jpg" alt="">
                        <input type="text" name="" id="" placeholder="Write your comment . . ." readonly/>
                    </div>
                </div>

            </div>
            <div></div>
        </div>

    </div>

    <template class="friendList">
        <div class="friends">
            <h4 class="friendsName"></h4>
        </div>
    </template>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.js"></script>
    <script src="js/main.js"></script>
    <script>
     $(document).ready(function() {
    var id = localStorage.getItem("id");
    var name = localStorage.getItem("name");
    if (!name) {    
        window.location.href = "index.html"; 
    } else {
        var firstName = name.split(" ").slice(0, -1).join(" ");
        document.getElementById("name").textContent = firstName;
        document.getElementById("anotherName").textContent = firstName;
    }

    $.ajax({
        url: "php/fetchFriends.php",
        type: "GET",
        success: function(data) {
            let people = JSON.parse(data);
            let template = document.querySelector('.friendList');
            let container = document.querySelector('.friend-section');

            people.forEach(person => {
                let clone = template.content.cloneNode(true);
                clone.querySelector('.friendsName').textContent = person.name;
                container.appendChild(clone);
            });
        },
        error: function() {
            alert("Error fetching people data.");
        }
    });

});






    </script>
</body>
</html>
